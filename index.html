<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2 para 1000 - Milhar da Sorte</title>

    <!-- Open Graph (Facebook, Instagram, WhatsApp) -->
    <meta property="og:title" content="2 para 1000 - Milhar da Sorte">
    <meta property="og:description" content="Com apenas R$2 voc√™ pode ganhar R$1.000! Bilhetes da milhar com sorteio di√°rio baseado na Lotep/PB. R√°pido, 100% online e com pagamento seguro via Pix.">
    <meta property="og:image" content="https://raspabrasil.onrender.com/static/images/logo.jpg">
    <meta property="og:url" content="https://raspabrasil.onrender.com">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="pt_BR">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-green: #00b341;
            --primary-yellow: #ffd700;
            --primary-blue: #003087;
            --primary-red: #dc2626;
            --success-green: #28a745;
            --gradient-bg: linear-gradient(135deg, #00b341 0%, #ffd700 50%, #003087 100%);
            --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 8px 40px rgba(0, 0, 0, 0.15);
            --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.3);
            --border-radius: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gradient-bg);
            min-height: 100vh;
            color: #1a1a1a;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Background Animation */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 179, 65, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 48, 135, 0.15) 0%, transparent 50%);
            animation: backgroundMove 25s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundMove {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-heavy);
            margin-top: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Header Moderno */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-yellow));
            border-radius: var(--border-radius);
            margin-bottom: 40px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: clamp(2.5em, 8vw, 4em);
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 3px 3px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: clamp(1em, 4vw, 1.3em);
            font-weight: 500;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .logo-brasil {
            margin: 0 auto 20px auto;
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: center;
        }

        .logo-bandeira {
            width: clamp(60px, 15vw, 90px);
            height: clamp(60px, 15vw, 90px);
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            animation: pulse 3s infinite;
            border: 3px solid #ffd700;
            cursor: pointer;
            transition: var(--transition);
            background-image: url('https://pfst.cf2.poecdn.net/base/image/6334603f4a3905c7fd614b3b09aa286277d7dbe6636795bc8742d06a7e88e5b8?w=980&h=980');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.08) rotate(5deg); }
        }

        /* Bot√µes Modernos */
        .btn {
            padding: clamp(14px, 4vw, 18px) clamp(28px, 6vw, 36px);
            border: none;
            border-radius: 15px;
            font-size: clamp(14px, 4vw, 17px);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green), #00a538);
            color: white;
            box-shadow: var(--shadow-medium);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: var(--shadow-heavy);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--primary-yellow), #ffcc00);
            color: #333;
            box-shadow: var(--shadow-medium);
        }

        .btn-cta {
            background: linear-gradient(135deg, var(--success-green), #1e7e34);
            color: white;
            font-size: clamp(18px, 5vw, 22px);
            padding: clamp(18px, 5vw, 22px) clamp(36px, 8vw, 45px);
            animation: ctaPulse 2s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(40, 167, 69, 0.6);
        }

        @keyframes ctaPulse {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 30px rgba(40, 167, 69, 0.6);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 0 50px rgba(40, 167, 69, 0.9);
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 30px rgba(40, 167, 69, 0.6);
            }
        }

        /* Se√ß√£o Principal */
        .main-section {
            text-align: center;
            margin-bottom: 50px;
            padding: 0 15px;
        }

        .main-section h2 {
            font-size: clamp(2em, 6vw, 3em);
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .main-section .subtitle {
            font-size: clamp(1.1em, 4vw, 1.4em);
            color: #555;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* Quantidade Selector */
        .quantidade-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: clamp(20px, 6vw, 30px);
            margin: 40px auto;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95));
            padding: clamp(25px, 6vw, 35px);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            max-width: 90%;
        }

        .quantidade-btn {
            width: clamp(50px, 14vw, 70px);
            height: clamp(50px, 14vw, 70px);
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-green), #00a538);
            color: white;
            font-size: clamp(24px, 6vw, 32px);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
        }

        .quantidade-btn:hover {
            transform: scale(1.15);
            box-shadow: var(--shadow-heavy);
        }

        .quantidade-display {
            font-size: clamp(3em, 10vw, 5em);
            font-weight: 900;
            color: var(--primary-green);
            min-width: clamp(80px, 20vw, 120px);
            text-align: center;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .total-display {
            text-align: center;
            font-size: clamp(1.8em, 7vw, 2.8em);
            font-weight: 800;
            color: var(--primary-blue);
            margin: 30px auto;
            padding: clamp(20px, 5vw, 30px);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95));
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            max-width: 90%;
        }

        /* Se√ß√£o de Resultados */
        .resultado-section {
            background: linear-gradient(135deg, #f0f9f0, #e8f5e8);
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            margin: 40px 0;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
            border: 3px solid #28a745;
        }

        .resultado-title {
            text-align: center;
            font-size: clamp(1.8em, 6vw, 2.5em);
            color: #28a745;
            font-weight: 800;
            margin-bottom: 30px;
        }

        .milhar-sorteada {
            text-align: center;
            font-size: clamp(3em, 10vw, 5em);
            font-weight: 900;
            color: var(--primary-green);
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow-light);
            border: 2px solid #28a745;
        }

        .premio-acumulado {
            text-align: center;
            font-size: clamp(2em, 8vw, 3.5em);
            font-weight: 800;
            color: #dc2626;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #fff5f5, #fee);
            border-radius: 15px;
            box-shadow: var(--shadow-light);
            border: 2px solid #dc2626;
        }

        /* Bilhete Digital */
        .bilhete-container {
            background: linear-gradient(135deg, #f8f9fa, white);
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            margin: 30px 0;
            box-shadow: var(--shadow-medium);
            border: 3px solid var(--primary-green);
        }

        .bilhete-digital {
            background: white;
            border: 2px dashed var(--primary-green);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: var(--shadow-light);
        }

        .bilhete-numero {
            text-align: center;
            font-size: clamp(3em, 10vw, 5em);
            font-weight: 900;
            color: var(--primary-green);
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f0f9f0, #e8f5e8);
            border-radius: 15px;
        }

        /* Formul√°rio de Bilhete */
        .bilhete-form {
            background: linear-gradient(135deg, #e8f5e8, #f0f9f0);
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            margin: 40px 0;
            border: 4px solid #4CAF50;
            box-shadow: var(--shadow-medium);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: #333;
            font-size: clamp(14px, 3.5vw, 16px);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: clamp(14px, 4vw, 18px);
            border: 3px solid #ddd;
            border-radius: 12px;
            font-size: clamp(16px, 4vw, 18px);
            transition: var(--transition);
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-green);
            outline: none;
            box-shadow: 0 0 0 4px rgba(0, 179, 65, 0.15);
        }

        /* Payment Page */
        .payment-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
        }

        .qr-container {
            background: linear-gradient(135deg, #f8f9fa, white);
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            text-align: center;
            margin: 30px 0;
            box-shadow: var(--shadow-light);
        }

        .qr-code img {
            max-width: min(200px, 70vw);
            max-height: min(200px, 70vw);
            width: auto;
            height: auto;
            border: 3px solid var(--primary-green);
            border-radius: 12px;
            box-shadow: var(--shadow-medium);
        }

        .pix-code {
            background: #f8f9fa;
            padding: clamp(15px, 4vw, 20px);
            border-radius: 12px;
            margin: 25px 0;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: clamp(11px, 3vw, 14px);
            border: 2px dashed var(--primary-green);
            color: #1a1a1a;
            font-weight: 600;
            line-height: 1.4;
            max-height: 120px;
            overflow-y: auto;
        }

        /* Modal Admin */
        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }

        .admin-modal-content {
            background: white;
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            max-width: 900px;
            width: 95%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: var(--shadow-heavy);
        }

        /* Admin Tabs */
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .admin-tab {
            padding: 12px 20px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .admin-tab.active {
            background: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        /* CTA Messages */
        .cta-message {
            background: linear-gradient(135deg, var(--primary-red), #ef4444);
            color: white;
            padding: clamp(20px, 5vw, 30px);
            border-radius: var(--border-radius);
            margin: 30px 0;
            text-align: center;
            box-shadow: var(--shadow-medium);
            position: relative;
            overflow: hidden;
        }

        .cta-message.success {
            background: linear-gradient(135deg, var(--success-green), #1e7e34);
        }

        .cta-message.warning {
            background: linear-gradient(135deg, #ff9800, #f57c00);
        }

        /* WhatsApp Button */
        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: clamp(16px, 4vw, 20px) clamp(32px, 6vw, 40px);
            border: none;
            border-radius: 15px;
            font-size: clamp(16px, 4vw, 20px);
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 25px;
            transition: var(--transition);
            box-shadow: var(--shadow-medium);
        }

        .whatsapp-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-heavy);
        }

        /* Utility Classes */
        .page {
            display: none;
            animation: fadeIn 0.6s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: white;
            padding: clamp(25px, 6vw, 40px);
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: var(--shadow-heavy);
        }

        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 50px;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .quantidade-selector {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 20px;
                padding: 25px 15px;
            }

            .qr-code img {
                max-width: min(180px, 75vw);
                max-height: min(180px, 75vw);
            }

            .pix-code {
                font-size: clamp(10px, 2.8vw, 12px);
                padding: clamp(12px, 3vw, 15px);
                line-height: 1.3;
            }
        }

        @media (max-width: 480px) {
            .qr-code img {
                max-width: min(150px, 80vw);
                max-height: min(150px, 80vw);
            }

            .pix-code {
                font-size: 10px;
                padding: 10px;
                line-height: 1.2;
            }

            .quantidade-selector {
                gap: 15px;
                padding: 20px 10px;
            }

            .total-display {
                font-size: clamp(1.5em, 6vw, 2.2em);
                padding: 15px;
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            .dark {
                color-scheme: dark;
            }
            
            .dark .container {
                background: rgba(30, 30, 30, 0.98);
                color: #f1f1f1;
            }
            
            .dark .form-group input,
            .dark .form-group select {
                background: #2a2a2a;
                color: #f1f1f1;
                border-color: #555;
            }
            
            .dark .form-group input:focus,
            .dark .form-group select:focus {
                border-color: var(--primary-green);
                background: #333;
            }
            
            .dark .modal-content,
            .dark .admin-modal-content {
                background: #2a2a2a;
                color: #f1f1f1;
            }
            
            .dark .pix-code {
                background: #2a2a2a;
                color: #f1f1f1;
                border-color: var(--primary-green);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- P√°gina Inicial -->
        <div id="home-page" class="page active">
            <!-- Header -->
            <div class="header">
                <div class="logo-brasil">
                    <div class="logo-bandeira" onclick="abrirAdmin()" title="Clique para acessar admin">
                    </div>
                </div>
                <h1>2 PARA 1000</h1>
                <p>Milhar da Sorte - Sorteio Di√°rio!</p>
            </div>

            <!-- Resultado do Sorteio -->
            <div class="resultado-section">
                <h2 class="resultado-title">Resultado do Sorteio de Hoje</h2>
                <div id="resultado-container">
                    <div class="milhar-sorteada" id="milhar-sorteada">
                        ----
                    </div>
                    <div id="status-sorteio">
                        <p style="text-align: center; font-size: clamp(1.2em, 4vw, 1.5em); font-weight: 600; margin: 20px 0;">
                            Aguardando sorteio das 18h...
                        </p>
                    </div>
                </div>
                
                <div class="premio-acumulado">
                    <p style="font-size: clamp(1em, 3vw, 1.2em); margin-bottom: 10px;">Pr√™mio Acumulado</p>
                    <div id="premio-acumulado-valor">R$ 1.000,00</div>
                </div>
            </div>

            <!-- CTA Message -->
            <div class="cta-message">
                <h3>BILHETES LIMITADOS!</h3>
                <p>Cada bilhete custa apenas <strong>R$ 2,00</strong> e pode ganhar at√© <strong>R$ 1.000,00!</strong></p>
                <div style="margin-top: 15px; background: rgba(255, 255, 255, 0.25); padding: 12px 20px; border-radius: 25px; font-weight: 700;">
                    Sorteio di√°rio √†s 18h baseado na Lotep/PB!
                </div>
            </div>

            <div class="main-section">
                <h2>Ganhe at√© R$ 1.000,00!</h2>
                <p class="subtitle">Cada bilhete custa apenas <strong>R$ 2,00</strong></p>
                
                <div class="quantidade-selector">
                    <button class="quantidade-btn" onclick="diminuirQuantidade()">
                        -
                    </button>
                    <div id="quantidade-display" class="quantidade-display">1</div>
                    <button class="quantidade-btn" onclick="aumentarQuantidade()">
                        +
                    </button>
                </div>
                
                <div id="total-display" class="total-display">
                    Total: R$ 2,00
                </div>
                
                <button class="btn btn-cta" onclick="irParaPagamento()">
                    COMPRAR BILHETES
                </button>

                <div style="margin-top: 30px; display: grid; grid-template-columns: 1fr; gap: 15px; max-width: 600px; margin-left: auto; margin-right: auto;">
                    <div style="background: rgba(255, 255, 255, 0.9); padding: 15px 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border: 2px solid rgba(40, 167, 69, 0.2); text-align: center;">
                        <span style="font-size: clamp(0.9em, 3.5vw, 1.1em); color: #666; font-weight: 600;">
                            <i class="fas fa-shield-alt" style="color: var(--success-green); margin-right: 8px;"></i>
                            Pagamento 100% seguro
                        </span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.9); padding: 15px 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border: 2px solid rgba(40, 167, 69, 0.2); text-align: center;">
                        <span style="font-size: clamp(0.9em, 3.5vw, 1.1em); color: #666; font-weight: 600;">
                            <i class="fas fa-clock" style="color: var(--success-green); margin-right: 8px;"></i>
                            Sorteio di√°rio √†s 18h
                        </span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.9); padding: 15px 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border: 2px solid rgba(40, 167, 69, 0.2); text-align: center;">
                        <span style="font-size: clamp(0.9em, 3.5vw, 1.1em); color: #666; font-weight: 600;">
                            <i class="fas fa-trophy" style="color: var(--success-green); margin-right: 8px;"></i>
                            Pr√™mios pagos em at√© 24h
                        </span>
                    </div>
                </div>
            </div>

            <!-- √öltimos Ganhadores -->
            <div id="ultimos-ganhadores" style="margin-top: 40px;"></div>
        </div>

        <!-- P√°gina de Pagamento -->
        <div id="payment-page" class="page">
            <div class="header">
                <div class="logo-brasil">
                    <div class="logo-bandeira"></div>
                </div>
                <h1>2 PARA 1000</h1>
                <p>Finalize seu pagamento</p>
            </div>

            <div class="payment-container">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #1a1a1a;">Pagamento via PIX</h2>
                    <p style="font-size: clamp(1.1em, 4vw, 1.3em); margin: 15px 0; font-weight: 600; color: #1a1a1a;">
                        Quantidade: <strong><span id="quantidade-pagamento">1</span> bilhete(s)</strong>
                    </p>
                    <div style="background: linear-gradient(135deg, #00b341, #003087); color: white; padding: clamp(15px, 4vw, 25px); border-radius: 15px; font-size: clamp(1.3em, 5vw, 1.8em); font-weight: 800; box-shadow: 0 8px 25px rgba(0,0,0,0.2);">
                        Total: R$ <span id="total-pagamento">2,00</span>
                    </div>
                </div>

                <div id="payment-status">
                    <div class="loading">
                        <p style="font-size: clamp(1.1em, 4vw, 1.3em); margin-bottom: 25px; font-weight: 600; color: #1a1a1a;">Gerando seu QR Code PIX...</p>
                    </div>
                </div>

                <div class="qr-container" id="qr-section" style="display: none;">
                    <h3 style="color: #1a1a1a;">Escaneie o QR Code</h3>
                    <div id="qr-code" class="qr-code"></div>
                    
                    <div style="margin: 25px 0;">
                        <p style="font-weight: 700; margin-bottom: 15px; font-size: clamp(1em, 3.5vw, 1.2em); color: #1a1a1a;">
                            Ou copie o c√≥digo PIX:
                        </p>
                        <div class="pix-code" id="pix-code"></div>
                        <button class="btn btn-secondary" onclick="copiarCodigoPix()">
                            Copiar C√≥digo PIX
                        </button>
                    </div>

                    <div id="payment-actions">
                        <button class="btn btn-primary" onclick="criarPagamentoReal()" style="width: 100%; margin-top: 25px;" id="btn-real-payment">
                            Pagar com PIX
                        </button>

                        <div class="cta-message warning" style="margin: 25px 0;">
                            <h4>Importante!</h4>
                            <p style="margin: 10px 0; font-size: clamp(0.9em, 3vw, 1.1em);">
                                ‚Ä¢ Pagamento deve ser aprovado para gerar os bilhetes<br>
                                ‚Ä¢ Aguarde a confirma√ß√£o autom√°tica ap√≥s o PIX<br>
                                ‚Ä¢ N√£o feche esta p√°gina durante o pagamento
                            </p>
                        </div>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); padding: clamp(20px, 5vw, 30px); border-radius: 15px; margin: 35px 0; border: 3px solid #ffc107;">
                    <h4 style="margin-bottom: 20px; font-size: clamp(1.1em, 4vw, 1.4em); font-weight: 800; color: #1a1a1a;">
                        Como pagar:
                    </h4>
                    <ol style="line-height: 2; padding-left: 25px; font-size: clamp(0.95em, 3.5vw, 1.1em); color: #1a1a1a; font-weight: 600;">
                        <li><strong>Clique em "Pagar com PIX"</strong></li>
                        <li><strong>Abra o app do seu banco</strong></li>
                        <li><strong>Escolha a op√ß√£o PIX</strong></li>
                        <li><strong>Escaneie o QR Code ou cole o c√≥digo</strong></li>
                        <li><strong>Confirme o pagamento de R$ <span id="total-pagamento-info">2,00</span></strong></li>
                        <li><strong>Aguarde a confirma√ß√£o autom√°tica</strong></li>
                    </ol>
                </div>

                <div style="text-align: center;">
                    <button class="btn btn-secondary" onclick="voltarInicio()">
                        Voltar ao In√≠cio
                    </button>
                </div>
            </div>
        </div>

        <!-- P√°gina de Bilhetes -->
        <div id="bilhetes-page" class="page">
            <div class="header">
                <div class="logo-brasil">
                    <div class="logo-bandeira"></div>
                </div>
                <h1>2 PARA 1000</h1>
                <p>Seus bilhetes da sorte!</p>
            </div>

            <div style="text-align: center; margin-bottom: 50px;">
                <h2 style="font-size: clamp(2em, 7vw, 3em); color: #00b341; font-weight: 800;">
                    Parab√©ns! Seus bilhetes foram gerados!
                </h2>
                <p style="font-size: clamp(1.2em, 5vw, 1.5em); margin: 20px 0; font-weight: 600;">
                    Voc√™ tem <strong><span id="quantidade-bilhetes">1</span></strong> bilhete(s) para o sorteio de hoje
                </p>
                <div class="cta-message success" style="margin: 25px auto; max-width: 600px;">
                    <h3>Boa sorte!</h3>
                    <p>O sorteio ser√° √†s 18h baseado no resultado da Lotep/PB!</p>
                </div>
            </div>

            <div id="bilhetes-container">
                <!-- Bilhetes ser√£o gerados dinamicamente -->
            </div>

            <div id="formulario-dados" style="display: none;">
                <div class="bilhete-form">
                    <h3 style="color: #4CAF50; font-size: clamp(1.5em, 5vw, 2.2em); margin-bottom: 25px; text-align: center; font-weight: 800;">
                        Complete seus dados para participar!
                    </h3>
                    
                    <div class="form-group">
                        <label>Nome Completo:</label>
                        <input type="text" id="nome-cliente" placeholder="Digite seu nome completo" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Telefone/WhatsApp:</label>
                        <input type="tel" id="telefone-cliente" placeholder="(11) 99999-9999" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Chave PIX (para receber pr√™mio):</label>
                        <input type="text" id="chave-pix-cliente" placeholder="Digite sua chave PIX" required>
                    </div>
                    
                    <button class="btn btn-cta" onclick="enviarBilhete()" style="width: 100%;">
                        ENVIAR BILHETE
                    </button>

                    <div style="background: linear-gradient(135deg, #e8f4f8, #d1ecf1); padding: 20px; border-radius: 12px; margin-top: 25px; font-size: clamp(0.85em, 3vw, 1em); text-align: center; border: 2px solid #17a2b8;">
                        <p><strong>Seus dados est√£o seguros!</strong></p>
                        <p>Complete o cadastro para participar do sorteio di√°rio.</p>
                        <p>O sorteio acontece todos os dias √†s 18h!</p>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 50px;">
                <button class="btn btn-secondary" onclick="voltarInicio()">
                    Voltar ao In√≠cio
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Admin -->
    <div id="admin-modal" class="admin-modal">
        <div class="admin-modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2>√Årea Administrativa - 2 para 1000</h2>
                <button onclick="fecharAdmin()" style="background: none; border: none; font-size: 30px; cursor: pointer; color: #666;">√ó</button>
            </div>

            <div id="admin-login">
                <div class="form-group">
                    <label>Senha Administrativa:</label>
                    <input type="password" id="admin-senha" placeholder="Digite a senha">
                </div>
                <button class="btn btn-primary" onclick="loginAdmin()" style="width: 100%;">
                    Entrar
                </button>
                <div id="admin-message" style="margin-top: 20px;"></div>
            </div>

            <div id="admin-panel" style="display: none;">
                <!-- Abas do Admin -->
                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="trocarAbaAdmin('dashboard')">Dashboard</div>
                    <div class="admin-tab" onclick="trocarAbaAdmin('sorteio')">Sorteio</div>
                    <div class="admin-tab" onclick="trocarAbaAdmin('bilhetes')">Bilhetes</div>
                    <div class="admin-tab" onclick="trocarAbaAdmin('ganhadores')">Ganhadores</div>
                    <div class="admin-tab" onclick="trocarAbaAdmin('vendas')">Vendas</div>
                </div>

                <!-- Dashboard -->
                <div id="admin-dashboard" class="admin-tab-content active">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #f0f9f0, #e8f5e8); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid #28a745;">
                            <div style="font-size: 2em; font-weight: 800; color: #28a745;" id="admin-vendidos">0</div>
                            <div style="color: #666;">Bilhetes Vendidos</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f0f9f0, #e8f5e8); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid #28a745;">
                            <div style="font-size: 2em; font-weight: 800; color: #28a745;" id="admin-ganhadores">0</div>
                            <div style="color: #666;">Ganhadores</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f0f9f0, #e8f5e8); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid #28a745;">
                            <div style="font-size: 2em; font-weight: 800; color: #28a745;" id="admin-premio-atual">R$ 1.000</div>
                            <div style="color: #666;">Pr√™mio Atual</div>
                        </div>
                    </div>
                </div>

                <!-- Sorteio -->
                <div id="admin-sorteio" class="admin-tab-content">
                    <h4>Realizar Sorteio Di√°rio</h4>
                    <p style="margin-bottom: 20px; color: #666;">
                        Insira a milhar sorteada pela Lotep/PB e clique em sortear.
                    </p>
                    
                    <div class="form-group">
                        <label>Milhar Sorteada (Lotep/PB):</label>
                        <input type="text" id="milhar-sorteada-input" placeholder="Ex: 1234" maxlength="4" style="text-align: center; font-size: 24px; font-weight: bold;">
                    </div>
                    
                    <button class="btn btn-primary" onclick="realizarSorteio()" style="width: 100%; margin-bottom: 20px;">
                        REALIZAR SORTEIO
                    </button>
                    
                    <div id="resultado-sorteio-admin"></div>
                </div>

                <!-- Bilhetes Vendidos -->
                <div id="admin-bilhetes" class="admin-tab-content">
                    <h4>Bilhetes Vendidos Hoje</h4>
                    <button class="btn btn-secondary" onclick="carregarBilhetes()" style="margin-bottom: 20px;">
                        Atualizar Lista
                    </button>
                    <div id="lista-bilhetes"></div>
                </div>

                <!-- Ganhadores -->
                <div id="admin-ganhadores" class="admin-tab-content">
                    <h4>Hist√≥rico de Ganhadores</h4>
                    <button class="btn btn-secondary" onclick="carregarGanhadores()" style="margin-bottom: 20px;">
                        Atualizar Lista
                    </button>
                    <div id="lista-ganhadores-admin"></div>
                </div>

                <!-- Vendas -->
                <div id="admin-vendas" class="admin-tab-content">
                    <h4>Relat√≥rio de Vendas</h4>
                    <div id="vendas-stats">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <h5>Estat√≠sticas de Hoje</h5>
                            <p><strong>Bilhetes Vendidos:</strong> <span id="vendas-hoje">0</span></p>
                            <p><strong>Valor Arrecadado:</strong> R$ <span id="valor-arrecadado">0,00</span></p>
                            <p><strong>Pr√™mio Atual:</strong> R$ <span id="premio-atual-vendas">1.000,00</span></p>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="carregarRelatorioVendas()">
                        Atualizar Relat√≥rio
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal personalizado -->
    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <div id="modal-message"></div>
            <div style="margin-top: 25px;">
                <button class="btn btn-secondary" onclick="fecharModal()">OK</button>
            </div>
        </div>
    </div>

    <script>
        // Vari√°veis globais
        let quantidade = 1;
        let paymentCheckInterval;
        let currentPaymentId = null;
        let currentAdminTab = 'dashboard';
        const WHATSAPP_NUMERO = "5582996092684";

        // Fun√ß√£o para gerar n√∫meros aleat√≥rios de 4 d√≠gitos
        function gerarMilhar() {
            return Math.floor(Math.random() * (9999 - 1111 + 1)) + 1111;
        }

        // Fun√ß√£o para formatar valores monet√°rios
        function formatarDinheiro(valor) {
            return valor.toFixed(2).replace('.', ',');
        }

        // Fun√ß√£o para mostrar modal personalizado
        function mostrarModal(mensagem) {
            document.getElementById('modal-message').innerHTML = mensagem;
            document.getElementById('custom-modal').style.display = 'flex';
        }

        function fecharModal() {
            document.getElementById('custom-modal').style.display = 'none';
        }

        // Fun√ß√£o para alternar p√°ginas
        function mostrarPagina(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // Fun√ß√µes para quantidade
        function aumentarQuantidade() {
            quantidade++;
            atualizarDisplay();
        }

        function diminuirQuantidade() {
            if (quantidade > 1) {
                quantidade--;
                atualizarDisplay();
            }
        }

        function atualizarDisplay() {
            document.getElementById('quantidade-display').textContent = quantidade;
            const valorTotal = quantidade * 2.00;
            document.getElementById('total-display').innerHTML = `Total: R$ ${formatarDinheiro(valorTotal)}`;
        }

        // Fun√ß√£o para carregar resultado do sorteio na home
        async function carregarResultadoSorteio() {
            try {
                const response = await fetch('/resultado_sorteio');
                const resultado = await response.json();
                
                if (resultado.milhar_sorteada) {
                    document.getElementById('milhar-sorteada').textContent = resultado.milhar_sorteada;
                    
                    if (resultado.houve_ganhador) {
                        document.getElementById('status-sorteio').innerHTML = `
                            <div style="background: #d4edda; color: #155724; padding: 20px; border-radius: 15px; text-align: center; margin: 20px 0; border: 3px solid #c3e6cb;">
                                <h3>üéâ TIVEMOS UM GANHADOR! üéâ</h3>
                                <p style="font-size: 1.2em; margin: 10px 0;">
                                    O bilhete com a milhar <strong>${resultado.milhar_sorteada}</strong> ganhou <strong>R$ ${resultado.valor_premio}</strong>!
                                </p>
                                <p>Pr√≥ximo sorteio hoje √†s 18h!</p>
                            </div>
                        `;
                        document.getElementById('premio-acumulado-valor').textContent = 'R$ 1.000,00';
                    } else {
                        document.getElementById('status-sorteio').innerHTML = `
                            <div style="background: #fff3cd; color: #856404; padding: 20px; border-radius: 15px; text-align: center; margin: 20px 0; border: 3px solid #ffeaa7;">
                                <h3>Nenhum ganhador hoje!</h3>
                                <p style="font-size: 1.2em; margin: 10px 0;">
                                    Milhar sorteada: <strong>${resultado.milhar_sorteada}</strong>
                                </p>
                                <p>O pr√™mio acumulou para o pr√≥ximo sorteio!</p>
                            </div>
                        `;
                        document.getElementById('premio-acumulado-valor').textContent = `R$ ${resultado.valor_acumulado}`;
                    }
                } else {
                    document.getElementById('milhar-sorteada').textContent = '----';
                    document.getElementById('status-sorteio').innerHTML = `
                        <p style="text-align: center; font-size: clamp(1.2em, 4vw, 1.5em); font-weight: 600; margin: 20px 0;">
                            Aguardando sorteio das 18h...
                        </p>
                    `;
                    document.getElementById('premio-acumulado-valor').textContent = `R$ ${resultado.valor_acumulado || '1.000,00'}`;
                }
                
            } catch (error) {
                console.error('Erro ao carregar resultado:', error);
            }
        }

        // Fun√ß√£o para carregar √∫ltimos ganhadores
        async function carregarUltimosGanhadores() {
            try {
                const response = await fetch('/ultimos_ganhadores');
                const resultado = await response.json();
                
                if (resultado.ganhadores && resultado.ganhadores.length > 0) {
                    let html = `
                        <div style="background: linear-gradient(135deg, #f0f9f0, #e8f5e8); padding: 25px; border-radius: 20px; margin: 40px 0; box-shadow: 0 8px 40px rgba(0, 0, 0, 0.15); border: 3px solid #28a745;">
                            <h3 style="text-align: center; margin-bottom: 30px; font-size: clamp(1.8em, 6vw, 2.5em); color: #28a745; font-weight: 800;">
                                √öltimos Ganhadores
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    `;
                    
                    resultado.ganhadores.forEach(ganhador => {
                        html += `
                            <div style="background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); text-align: center; border: 2px solid #28a745;">
                                <div style="font-size: 1.3em; font-weight: 800; color: #1a1a1a; margin-bottom: 8px;">
                                    ${ganhador.nome}
                                </div>
                                <div style="font-size: 1.6em; font-weight: 900; color: #28a745; margin-bottom: 8px;">
                                    ${ganhador.valor}
                                </div>
                                <div style="font-size: 1em; color: #666; font-weight: 600;">
                                    Milhar: ${ganhador.milhar}
                                </div>
                                <div style="font-size: 0.9em; color: #666; font-weight: 600;">
                                    ${ganhador.data}
                                </div>
                            </div>
                        `;
                    });
                    
                    html += '</div></div>';
                    document.getElementById('ultimos-ganhadores').innerHTML = html;
                }
            } catch (error) {
                console.error('Erro ao carregar ganhadores:', error);
            }
        }

        // Navega√ß√£o
        function irParaPagamento() {
            document.getElementById('quantidade-pagamento').textContent = quantidade;
            document.getElementById('total-pagamento').textContent = formatarDinheiro(quantidade * 2.00);
            document.getElementById('total-pagamento-info').textContent = formatarDinheiro(quantidade * 2.00);
            mostrarPagina('payment-page');
            setTimeout(() => criarPagamentoReal(), 1500);
        }

        function voltarInicio() {
            mostrarPagina('home-page');
            if (paymentCheckInterval) {
                clearInterval(paymentCheckInterval);
                paymentCheckInterval = null;
            }
        }

        function irParaBilhetes() {
            document.getElementById('quantidade-bilhetes').textContent = quantidade;
            gerarBilhetes();
            mostrarPagina('bilhetes-page');
        }

        // Fun√ß√£o para gerar bilhetes
        function gerarBilhetes() {
            const container = document.getElementById('bilhetes-container');
            container.innerHTML = '';
            
            for (let i = 0; i < quantidade; i++) {
                const milhar = gerarMilhar();
                
                const bilheteDiv = document.createElement('div');
                bilheteDiv.className = 'bilhete-container';
                bilheteDiv.innerHTML = `
                    <h3 style="color: #4CAF50; font-size: clamp(1.5em, 5vw, 2em); margin-bottom: 20px; text-align: center; font-weight: 800;">
                        Bilhete ${i + 1}
                    </h3>
                    <div class="bilhete-digital">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h4 style="color: #666; margin-bottom: 10px;">SEU N√öMERO DA SORTE</h4>
                            <div class="bilhete-numero">${milhar}</div>
                            <p style="color: #666; font-weight: 600; margin-top: 10px;">
                                Sorteio di√°rio √†s 18h baseado na Lotep/PB
                            </p>
                        </div>
                        
                        <div style="border-top: 2px dashed #ccc; padding-top: 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
                                <div>
                                    <strong>Data:</strong><br>
                                    ${new Date().toLocaleDateString('pt-BR')}
                                </div>
                                <div>
                                    <strong>Valor:</strong><br>
                                    R$ 2,00
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(bilheteDiv);
            }
            
            // Mostrar formul√°rio ap√≥s gerar bilhetes
            document.getElementById('formulario-dados').style.display = 'block';
        }

        // Fun√ß√£o para enviar bilhete
        async function enviarBilhete() {
            const nome = document.getElementById('nome-cliente').value.trim();
            const telefone = document.getElementById('telefone-cliente').value.trim();
            const chavePix = document.getElementById('chave-pix-cliente').value.trim();
            
            if (!nome || !telefone || !chavePix) {
                mostrarModal('<h3>Aten√ß√£o</h3><p>Por favor, preencha todos os campos!</p>');
                return;
            }

            if (nome.length < 3) {
                mostrarModal('<h3>Aten√ß√£o</h3><p>Nome deve ter pelo menos 3 caracteres!</p>');
                return;
            }

            try {
                // Coletar os n√∫meros dos bilhetes
                const bilhetes = [];
                const bilhetesElements = document.querySelectorAll('.bilhete-numero');
                bilhetesElements.forEach(element => {
                    bilhetes.push(element.textContent);
                });

                const response = await fetch('/enviar_bilhete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        nome,
                        telefone,
                        chave_pix: chavePix,
                        bilhetes,
                        payment_id: currentPaymentId
                    })
                });

                const resultado = await response.json();
                
                if (resultado.sucesso) {
                    mostrarModal(`
                        <h3>Bilhete Enviado com Sucesso!</h3>
                        <p>Seus dados foram registrados no sistema.</p>
                        <p><strong>N√∫meros:</strong> ${bilhetes.join(', ')}</p>
                        <p><strong>Sorteio:</strong> Hoje √†s 18h</p>
                        <p>Boa sorte!</p>
                    `);
                    
                    // Esconder formul√°rio
                    document.getElementById('formulario-dados').style.display = 'none';
                } else {
                    mostrarModal(`<h3>Erro</h3><p>${resultado.erro}</p>`);
                }

            } catch (error) {
                console.error('Erro ao enviar bilhete:', error);
                mostrarModal('<h3>Erro</h3><p>Erro ao enviar bilhete. Tente novamente.</p>');
            }
        }

        // Fun√ß√£o para criar pagamento real
        async function criarPagamentoReal() {
            const btn = document.getElementById('btn-real-payment');
            if (btn) {
                btn.innerHTML = 'Criando pagamento...';
                btn.disabled = true;
            }

            const paymentActions = document.getElementById('payment-actions');
            if (paymentActions) {
                paymentActions.style.display = 'none';
            }

            try {
                const response = await fetch('/create_payment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ quantidade: quantidade })
                });

                const data = await response.json();

                if (response.ok && data.id) {
                    currentPaymentId = data.id;
                    
                    if (data.qr_code_base64) {
                        document.getElementById('qr-code').innerHTML = `<img src="data:image/png;base64,${data.qr_code_base64}" alt="QR Code PIX">`;
                    }
                    if (data.qr_code) {
                        document.getElementById('pix-code').textContent = data.qr_code;
                    }

                    document.getElementById('qr-section').style.display = 'block';
                    document.getElementById('payment-status').innerHTML = `
                        <div class="cta-message" style="background: linear-gradient(135deg, #ffc107, #ff9800);">
                            <h3>Aguardando Pagamento</h3>
                            <p style="margin: 15px 0; font-size: clamp(1em, 3.5vw, 1.2em); color: #1a1a1a; font-weight: 700;">ID: ${data.id}</p>
                            <p style="font-size: clamp(0.85em, 3vw, 1em); opacity: 0.8; color: #1a1a1a; font-weight: 600;"><em>Escaneie o QR Code ou cole o c√≥digo PIX no seu banco</em></p>
                        </div>
                    `;

                    iniciarVerificacaoPagamento(data.id);

                } else {
                    throw new Error(data.error || 'Erro ao criar pagamento');
                }

            } catch (error) {
                console.error('Erro ao criar pagamento:', error);
                document.getElementById('payment-status').innerHTML = `
                    <div class="cta-message" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                        <h3>Erro ao Criar Pagamento</h3>
                        <p style="margin: 15px 0; font-size: clamp(1em, 3.5vw, 1.2em);">${error.message}</p>
                        <p style="font-size: clamp(0.85em, 3vw, 1em); opacity: 0.8;"><em>Tente novamente ou entre em contato</em></p>
                    </div>
                `;
                
                if (paymentActions) {
                    paymentActions.style.display = 'block';
                }
                if (btn) {
                    btn.innerHTML = 'Tentar Novamente';
                    btn.disabled = false;
                }
            }
        }

        // Fun√ß√£o para verificar pagamento automaticamente
        function iniciarVerificacaoPagamento(paymentId) {
            if (paymentCheckInterval) {
                clearInterval(paymentCheckInterval);
            }

            let tentativas = 0;
            const maxTentativas = 120;

            paymentCheckInterval = setInterval(async () => {
                tentativas++;
                
                try {
                    const response = await fetch(`/check_payment/${paymentId}`);
                    const data = await response.json();

                    if (data.status === 'approved') {
                        clearInterval(paymentCheckInterval);
                        paymentCheckInterval = null;

                        document.getElementById('payment-status').innerHTML = `
                            <div class="cta-message success">
                                <h3>Pagamento Aprovado!</h3>
                                <p style="margin: 15px 0; font-size: clamp(1em, 3.5vw, 1.2em);">Gerando seus bilhetes...</p>
                                <div style="margin-top: 20px;">
                                    <div style="display: inline-block; width: 40px; height: 40px; border: 4px solid white; border-top: 4px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                                </div>
                            </div>
                        `;

                        setTimeout(() => {
                            irParaBilhetes();
                        }, 3000);

                    } else if (data.status === 'rejected' || data.status === 'cancelled') {
                        clearInterval(paymentCheckInterval);
                        paymentCheckInterval = null;

                        document.getElementById('payment-status').innerHTML = `
                            <div class="cta-message" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                                <h3>Pagamento ${data.status === 'rejected' ? 'Rejeitado' : 'Cancelado'}</h3>
                                <p style="margin: 15px 0; font-size: clamp(1em, 3.5vw, 1.2em);">Tente novamente com outro m√©todo</p>
                            </div>
                        `;

                    } else if (tentativas >= maxTentativas) {
                        clearInterval(paymentCheckInterval);
                        paymentCheckInterval = null;

                        document.getElementById('payment-status').innerHTML = `
                            <div class="cta-message" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                                <h3>Tempo Esgotado</h3>
                                <p style="margin: 15px 0; font-size: clamp(1em, 3.5vw, 1.2em);">O pagamento demorou muito para ser confirmado</p>
                                <p style="font-size: clamp(0.85em, 3vw, 1em); opacity: 0.8;"><em>Se voc√™ j√° pagou, aguarde alguns minutos e recarregue a p√°gina</em></p>
                            </div>
                        `;
                    }

                } catch (error) {
                    console.error('Erro ao verificar pagamento:', error);
                    
                    if (tentativas >= maxTentativas) {
                        clearInterval(paymentCheckInterval);
                        paymentCheckInterval = null;
                    }
                }
            }, 5000);
        }

        // Fun√ß√£o para copiar c√≥digo PIX
        function copiarCodigoPix() {
            const codigo = document.getElementById('pix-code').textContent;
            navigator.clipboard.writeText(codigo).then(() => {
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = 'Copiado!';
                btn.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                }, 3000);
            }).catch(() => {
                mostrarModal('C√≥digo PIX copiado para a √°rea de transfer√™ncia!');
            });
        }

        // Fun√ß√µes Admin
        function abrirAdmin() {
            document.getElementById('admin-modal').style.display = 'flex';
        }

        function fecharAdmin() {
            document.getElementById('admin-modal').style.display = 'none';
        }

        function trocarAbaAdmin(aba) {
            document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.admin-tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`admin-${aba}`).classList.add('active');
            
            currentAdminTab = aba;
            
            switch(aba) {
                case 'dashboard':
                    carregarEstatisticasAdmin();
                    break;
                case 'bilhetes':
                    carregarBilhetes();
                    break;
                case 'ganhadores':
                    carregarGanhadores();
                    break;
                case 'vendas':
                    carregarRelatorioVendas();
                    break;
            }
        }

        async function loginAdmin() {
            const senha = document.getElementById('admin-senha').value;
            const messageDiv = document.getElementById('admin-message');
            
            if (!senha) {
                messageDiv.innerHTML = '<div style="color: #dc2626; padding: 10px; background: #fee; border-radius: 8px;">Digite a senha</div>';
                return;
            }
            
            try {
                const response = await fetch('/admin/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ senha })
                });
                
                const resultado = await response.json();
                
                if (resultado.success) {
                    document.getElementById('admin-login').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    await carregarEstatisticasAdmin();
                } else {
                    messageDiv.innerHTML = '<div style="color: #dc2626; padding: 10px; background: #fee; border-radius: 8px;">Senha incorreta</div>';
                }
                
            } catch (error) {
                console.error('Erro no login admin:', error);
                messageDiv.innerHTML = '<div style="color: #dc2626; padding: 10px; background: #fee; border-radius: 8px;">Erro ao fazer login</div>';
            }
        }

        async function carregarEstatisticasAdmin() {
            try {
                const response = await fetch('/admin/stats');
                const stats = await response.json();
                
                document.getElementById('admin-vendidos').textContent = stats.bilhetes_vendidos || 0;
                document.getElementById('admin-ganhadores').textContent = stats.total_ganhadores || 0;
                document.getElementById('admin-premio-atual').textContent = `R$ ${stats.premio_atual || '1.000'}`;
                
            } catch (error) {
                console.error('Erro ao carregar estat√≠sticas:', error);
            }
        }

        async function realizarSorteio() {
            const milhar = document.getElementById('milhar-sorteada-input').value.trim();
            const resultadoDiv = document.getElementById('resultado-sorteio-admin');
            
            if (!milhar || milhar.length !== 4 || isNaN(milhar)) {
                resultadoDiv.innerHTML = '<div style="color: #dc2626; padding: 15px; background: #fee; border-radius: 8px; margin-top: 15px;">Digite uma milhar v√°lida (4 d√≠gitos)</div>';
                return;
            }
            
            try {
                const response = await fetch('/admin/sortear', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ milhar_sorteada: milhar })
                });
                
                const resultado = await response.json();
                
                if (resultado.sucesso) {
                    if (resultado.houve_ganhador) {
                        resultadoDiv.innerHTML = `
                            <div style="color: #155724; padding: 20px; background: #d4edda; border-radius: 15px; margin-top: 15px; border: 2px solid #c3e6cb;">
                                <h4>üéâ GANHADOR ENCONTRADO! üéâ</h4>
                                <p><strong>Milhar:</strong> ${milhar}</p>
                                <p><strong>Ganhador:</strong> ${resultado.ganhador.nome}</p>
                                <p><strong>Pr√™mio:</strong> R$ ${resultado.valor_premio}</p>
                                <p><strong>Bilhete:</strong> ${resultado.ganhador.bilhete}</p>
                            </div>
                        `;
                    } else {
                        resultadoDiv.innerHTML = `
                            <div style="color: #856404; padding: 20px; background: #fff3cd; border-radius: 15px; margin-top: 15px; border: 2px solid #ffeaa7;">
                                <h4>Nenhum ganhador</h4>
                                <p><strong>Milhar sorteada:</strong> ${milhar}</p>
                                <p><strong>Pr√™mio acumulado:</strong> R$ ${resultado.novo_valor_acumulado}</p>
                                <p>O pr√™mio foi acumulado para o pr√≥ximo sorteio!</p>
                            </div>
                        `;
                    }
                    
                    // Limpar input
                    document.getElementById('milhar-sorteada-input').value = '';
                    
                    // Atualizar home page
                    carregarResultadoSorteio();
                    carregarEstatisticasAdmin();
                    
                } else {
                    resultadoDiv.innerHTML = `<div style="color: #dc2626; padding: 15px; background: #fee; border-radius: 8px; margin-top: 15px;">${resultado.erro}</div>`;
                }
                
            } catch (error) {
                console.error('Erro ao realizar sorteio:', error);
                resultadoDiv.innerHTML = '<div style="color: #dc2626; padding: 15px; background: #fee; border-radius: 8px; margin-top: 15px;">Erro ao realizar sorteio</div>';
            }
        }

        async function carregarBilhetes() {
            try {
                const response = await fetch('/admin/bilhetes');
                const resultado = await response.json();
                
                const container = document.getElementById('lista-bilhetes');
                
                if (resultado.bilhetes && resultado.bilhetes.length > 0) {
                    let html = '<div style="display: grid; gap: 15px;">';
                    
                    resultado.bilhetes.forEach(bilhete => {
                        html += `
                            <div style="background: white; padding: 20px; border-radius: 15px; border-left: 6px solid #28a745; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
                                <h5>${bilhete.nome}</h5>
                                <p><strong>Bilhetes:</strong> ${bilhete.bilhetes.join(', ')}</p>
                                <p><strong>Telefone:</strong> ${bilhete.telefone}</p>
                                <p><strong>PIX:</strong> ${bilhete.chave_pix}</p>
                                <p><strong>Data:</strong> ${new Date(bilhete.data_criacao).toLocaleString('pt-BR')}</p>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    container.innerHTML = html;
                } else {
                    container.innerHTML = '<p>Nenhum bilhete vendido hoje.</p>';
                }
                
            } catch (error) {
                console.error('Erro ao carregar bilhetes:', error);
                document.getElementById('lista-bilhetes').innerHTML = '<p>Erro ao carregar bilhetes.</p>';
            }
        }

        async function carregarGanhadores() {
            try {
                const response = await fetch('/admin/ganhadores');
                const resultado = await response.json();
                
                const container = document.getElementById('lista-ganhadores-admin');
                
                if (resultado.ganhadores && resultado.ganhadores.length > 0) {
                    let html = '<div style="display: grid; gap: 15px;">';
                    
                    resultado.ganhadores.forEach(ganhador => {
                        html += `
                            <div style="background: white; padding: 20px; border-radius: 15px; border-left: 6px solid #ffd700; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
                                <h5>${ganhador.nome}</h5>
                                <p><strong>Bilhete Premiado:</strong> ${ganhador.bilhete_premiado}</p>
                                <p><strong>Milhar Sorteada:</strong> ${ganhador.milhar_sorteada}</p>
                                <p><strong>Valor:</strong> ${ganhador.valor}</p>
                                <p><strong>PIX:</strong> ${ganhador.chave_pix}</p>
                                <p><strong>Data:</strong> ${new Date(ganhador.data_sorteio).toLocaleString('pt-BR')}</p>
                                <p><strong>Status:</strong> ${ganhador.status_pagamento}</p>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    container.innerHTML = html;
                } else {
                    container.innerHTML = '<p>Nenhum ganhador ainda.</p>';
                }
                
            } catch (error) {
                console.error('Erro ao carregar ganhadores:', error);
                document.getElementById('lista-ganhadores-admin').innerHTML = '<p>Erro ao carregar ganhadores.</p>';
            }
        }

        async function carregarRelatorioVendas() {
            try {
                const response = await fetch('/admin/stats');
                const stats = await response.json();
                
                document.getElementById('vendas-hoje').textContent = stats.bilhetes_vendidos || 0;
                document.getElementById('valor-arrecadado').textContent = formatarDinheiro((stats.bilhetes_vendidos || 0) * 2);
                document.getElementById('premio-atual-vendas').textContent = stats.premio_atual || '1.000,00';
                
            } catch (error) {
                console.error('Erro ao carregar vendas:', error);
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            atualizarDisplay();
            carregarResultadoSorteio();
            carregarUltimosGanhadores();
            
            // Recarregar resultados a cada 30 segundos
            setInterval(() => {
                carregarResultadoSorteio();
                carregarUltimosGanhadores();
            }, 30000);
        });

        // Detectar modo escuro
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
</body>
</html>
